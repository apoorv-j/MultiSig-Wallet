{"ast":null,"code":"import _regeneratorRuntime from \"/home/vibe/code/sol/wallet/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/vibe/code/sol/wallet/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Web3 from 'web3';\nimport Wallet from './contracts/Wallet.json';\nvar URL = 'http://127.0.0.1:9545/';\n\nvar getWeb3 = function getWeb3() {\n  return new Promise(function (resolve, reject) {\n    window.addEventListener('load', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var web3;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!window.ethereum) {\n                _context.next = 13;\n                break;\n              }\n\n              web3 = new Web3(window.ethereum);\n              _context.prev = 2;\n              _context.next = 5;\n              return window.ethereum.enable();\n\n            case 5:\n              resolve(new Web3(window.web3.currentProvider.enable()));\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](2);\n              reject(_context.t0);\n\n            case 11:\n              _context.next = 14;\n              break;\n\n            case 13:\n              if (window.web3) {\n                resolve(window.web3);\n              } else {\n                reject('Must install Metamask');\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 8]]);\n    })));\n  });\n};\n\nvar getWallet = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(web3) {\n    var networkId, deployedContract;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return web3.eth.net.getId();\n\n          case 2:\n            networkId = _context2.sent;\n            deployedContract = Wallet.networks[networkId];\n            return _context2.abrupt(\"return\", new web3.eth.Contract(Wallet.abi, deployedContract && deployedContract.address));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getWallet(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport { getWeb3, getWallet };","map":{"version":3,"sources":["/home/vibe/code/sol/wallet/client/src/utils.js"],"names":["Web3","Wallet","URL","getWeb3","Promise","resolve","reject","window","addEventListener","ethereum","web3","enable","currentProvider","getWallet","eth","net","getId","networkId","deployedContract","networks","Contract","abi","address"],"mappings":";;AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,IAAMC,GAAG,GAAG,wBAAZ;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAoB;AACnCC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,wEAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACzBD,MAAM,CAACE,QADkB;AAAA;AAAA;AAAA;;AAElBC,cAAAA,IAFkB,GAEX,IAAIV,IAAJ,CAASO,MAAM,CAACE,QAAhB,CAFW;AAAA;AAAA;AAAA,qBAIdF,MAAM,CAACE,QAAP,CAAgBE,MAAhB,EAJc;;AAAA;AAKpBN,cAAAA,OAAO,CAAC,IAAIL,IAAJ,CAASO,MAAM,CAACG,IAAP,CAAYE,eAAZ,CAA4BD,MAA5B,EAAT,CAAD,CAAP;AALoB;AAAA;;AAAA;AAAA;AAAA;AAOpBL,cAAAA,MAAM,aAAN;;AAPoB;AAAA;AAAA;;AAAA;AAUvB,kBAAGC,MAAM,CAACG,IAAV,EACL;AACIL,gBAAAA,OAAO,CAACE,MAAM,CAACG,IAAR,CAAP;AACH,eAHI,MAID;AACAJ,gBAAAA,MAAM,CAAC,uBAAD,CAAN;AACH;;AAhB2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhC;AAkBH,GAnBM,CAAP;AAoBH,CArBD;;AAuBA,IAAMO,SAAS;AAAA,uEAAG,kBAAMH,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACUA,IAAI,CAACI,GAAL,CAASC,GAAT,CAAaC,KAAb,EADV;;AAAA;AACRC,YAAAA,SADQ;AAERC,YAAAA,gBAFQ,GAEWjB,MAAM,CAACkB,QAAP,CAAgBF,SAAhB,CAFX;AAAA,8CAIP,IAAIP,IAAI,CAACI,GAAL,CAASM,QAAb,CACHnB,MAAM,CAACoB,GADJ,EAEHH,gBAAgB,IAAIA,gBAAgB,CAACI,OAFlC,CAJO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATT,SAAS;AAAA;AAAA;AAAA,GAAf;;AAUA,SAASV,OAAT,EAAkBU,SAAlB","sourcesContent":["import Web3 from 'web3';\nimport Wallet from './contracts/Wallet.json';\n\nconst URL = 'http://127.0.0.1:9545/';\n\nconst getWeb3 = () => {\n    return new Promise((resolve, reject) =>{\n        window.addEventListener('load', async ()=>{\n            if(window.ethereum){\n                const web3 = new Web3(window.ethereum);\n                try {\n                    await window.ethereum.enable();\n                    resolve(new Web3(window.web3.currentProvider.enable()));\n                } catch (error) {\n                    reject(error);\n                }\n            }\n            else if(window.web3)\n            {\n                resolve(window.web3);\n            }\n            else{\n                reject('Must install Metamask');\n            }\n        })\n    });\n};\n\nconst getWallet = async web3 => {\n    const networkId = await web3.eth.net.getId();\n    const deployedContract = Wallet.networks[networkId];\n\n    return new web3.eth.Contract(\n        Wallet.abi,\n        deployedContract && deployedContract.address\n    );\n};\n\nexport { getWeb3, getWallet};"]},"metadata":{},"sourceType":"module"}