{"ast":null,"code":"import _regeneratorRuntime from \"/home/vibe/code/sol/wallet/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/vibe/code/sol/wallet/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Web3 from 'web3';\nimport Wallet from './contracts/Wallet.json';\nvar URL = 'http://127.0.0.1:9545/';\n\nvar getWeb3 = function getWeb3() {\n  return new Promise(function (resolve, reject) {\n    // window.addEventListener('load', async ()=>{\n    if (window.ethereum) {\n      var web3 = new Web3(window.ethereum);\n\n      try {\n        window.ethereum.enable();\n        resolve(web3);\n      } catch (error) {\n        reject(error);\n      }\n    } else if (window.web3) {\n      resolve(window.web3);\n    } else {\n      reject('Must install Metamask');\n    } // })\n\n  });\n};\n\nvar getWallet = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(web3) {\n    var networkId, deployedContract;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return web3.eth.net.getId();\n\n          case 2:\n            networkId = _context.sent;\n            deployedContract = Wallet.networks[networkId];\n            return _context.abrupt(\"return\", new web3.eth.Contract(Wallet.abi, deployedContract && deployedContract.address));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getWallet(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport { getWeb3, getWallet };","map":{"version":3,"sources":["/home/vibe/code/sol/wallet/client/src/utils.js"],"names":["Web3","Wallet","URL","getWeb3","Promise","resolve","reject","window","ethereum","web3","enable","error","getWallet","eth","net","getId","networkId","deployedContract","networks","Contract","abi","address"],"mappings":";;AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,IAAMC,GAAG,GAAG,wBAAZ;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAoB;AACnC;AACI,QAAGC,MAAM,CAACC,QAAV,EAAmB;AACf,UAAMC,IAAI,GAAG,IAAIT,IAAJ,CAASO,MAAM,CAACC,QAAhB,CAAb;;AACA,UAAI;AACAD,QAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB;AACAL,QAAAA,OAAO,CAACI,IAAD,CAAP;AACH,OAHD,CAGE,OAAOE,KAAP,EAAc;AACZL,QAAAA,MAAM,CAACK,KAAD,CAAN;AACH;AACJ,KARD,MASK,IAAGJ,MAAM,CAACE,IAAV,EACL;AACIJ,MAAAA,OAAO,CAACE,MAAM,CAACE,IAAR,CAAP;AACH,KAHI,MAID;AACAH,MAAAA,MAAM,CAAC,uBAAD,CAAN;AACH,KAjB8B,CAkBnC;;AACH,GAnBM,CAAP;AAoBH,CArBD;;AAuBA,IAAMM,SAAS;AAAA,sEAAG,iBAAMH,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACUA,IAAI,CAACI,GAAL,CAASC,GAAT,CAAaC,KAAb,EADV;;AAAA;AACRC,YAAAA,SADQ;AAERC,YAAAA,gBAFQ,GAEWhB,MAAM,CAACiB,QAAP,CAAgBF,SAAhB,CAFX;AAAA,6CAIP,IAAIP,IAAI,CAACI,GAAL,CAASM,QAAb,CACHlB,MAAM,CAACmB,GADJ,EAEHH,gBAAgB,IAAIA,gBAAgB,CAACI,OAFlC,CAJO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATT,SAAS;AAAA;AAAA;AAAA,GAAf;;AAUA,SAAST,OAAT,EAAkBS,SAAlB","sourcesContent":["import Web3 from 'web3';\nimport Wallet from './contracts/Wallet.json';\n\nconst URL = 'http://127.0.0.1:9545/';\n\nconst getWeb3 = () => {\n    return new Promise((resolve, reject) =>{\n        // window.addEventListener('load', async ()=>{\n            if(window.ethereum){\n                const web3 = new Web3(window.ethereum);\n                try {\n                    window.ethereum.enable();\n                    resolve(web3);\n                } catch (error) {\n                    reject(error);\n                }\n            }\n            else if(window.web3)\n            {\n                resolve(window.web3);\n            }\n            else{\n                reject('Must install Metamask');\n            }\n        // })\n    });\n};\n\nconst getWallet = async web3 => {\n    const networkId = await web3.eth.net.getId();\n    const deployedContract = Wallet.networks[networkId];\n\n    return new web3.eth.Contract(\n        Wallet.abi,\n        deployedContract && deployedContract.address\n    );\n};\n\nexport { getWeb3, getWallet};"]},"metadata":{},"sourceType":"module"}